# π’³ λ©¤λ²„μ‹­ μ λ¦½ μ„λΉ„μ¤

<br>

## μ‹¤μµ λ‚΄μ©

- μ£Όμ λ” λ©¤λ²„μ‹­ μ λ¦½ μ„λΉ„μ¤
- μ§€μ›μ¤‘μΈ λ©¤λ²„μ‹­μ—λ” λ„¤μ΄λ²„, μΉ΄μΉ΄μ¤, GS&POINT 3κ°€μ§€ λ©¤λ²„μ‹­μ΄ μμΌλ©°, μ‚¬μ©μλ” μ›ν•λ” λ©¤λ²„μ‹­μ„ λ“±λ΅ν•  μ μλ‹¤.
- ν¬μΈνΈ μ λ¦½ λΉ„μ¨μ€ κ²°μ κΈμ•΅μ 1%λ΅ κ³ μ •λλ©°, μ¶”ν›„μ— κ³ μ • κΈμ•΅(1000μ›)μΌλ΅ ν™•μ¥ν•μ—¬ μ λ¦½λ  μ μμ–΄μ•Ό ν•λ‹¤.
- ν•΄λ‹Ή μ‹¤μµμ—μ„λ” μ„μ λ¬Έμ  μ„¤λ…κ³Ό μ•„λμ μ”κµ¬μ‚¬ν•­μ„ λ§μ΅±ν•λ” REST APIλ¥Ό μμ λ΅­κ² μ •μν•κ³ , TDD λ°©μ‹μΌλ΅ κµ¬ν„ν•λ” κ²ƒ

<br>

## μ”κµ¬μ‚¬ν•­

- λ©¤λ²„μ‹­ μ—°κ²°ν•κΈ°, λ‚μ λ©¤λ²„μ‹­ μ΅°ν, λ©¤λ²„μ‹­ μ—°κ²°λκΈ°, ν¬μΈνΈ μ λ¦½ API λ¥Ό κµ¬ν„ν•λ‹¤.
- **μ‚¬μ©μ μ‹λ³„κ°’μ€ λ¬Έμμ—΄ ν•νƒμ΄λ©° "X-USER-ID" λΌλ” HTTP Header λ΅ μ „λ‹¬λλ©°**, μ΄ κ°’μ€ ν¬μΈνΈ μ λ¦½ν•  λ• λ°”μ½”λ“ λ€μ‹  μ‚¬μ©λλ‹¤.
- Content-type μ‘λ‹µ ν•νƒλ” application/json(JSON) ν•μ‹μ„ μ‚¬μ©ν•λ‹¤.
- κ° κΈ°λ¥ λ° μ μ•½μ‚¬ν•­μ— λ€ν• κ°λ°μ„ TDD, λ‹¨μ„ν…μ¤νΈλ¥Ό κΈ°λ°μΌλ΅ μ§„ν–‰ν•΄μ•Ό ν•λ‹¤.

<br>

## API λ…μ„Έμ„

| **API**               | **HTTP Method** | **URI**                                | **Request**               | **Response**                                                |
| --------------------- | --------------- | -------------------------------------- | ------------------------- | ----------------------------------------------------------- |
| λ‚μ λ©¤λ²„μ‹­ λ“±λ΅      | POST            | /api/v1/memberships                    | - λ©¤λ²„μ‹­ μ΄λ¦„<br>- ν¬μΈνΈ | - λ©¤λ²„μ‹­ ID<br>- λ©¤λ²„μ‹­ μ΄λ¦„<br>- ν¬μΈνΈ<br>- κ°€μ… μΌμ‹     |
| λ‚μ λ©¤λ²„μ‹­ μ „μ²΄ μ΅°ν | GET             | /api/v1/memberships                    | x                         | {λ©¤λ²„μ‹­ ID, λ©¤λ²„μ‹­ μ΄λ¦„, ν¬μΈνΈ, κ°€μ… μΌμ‹}μ λ©¤λ²„μ‹­ λ¦¬μ¤νΈ |
| λ‚μ λ©¤λ²„μ‹­ μƒμ„Έ μ΅°ν | GET             | /api/v1/memberships/{membershipId}     | x                         | - λ©¤λ²„μ‹­ ID<br>- λ©¤λ²„μ‹­ μ΄λ¦„<br>- ν¬μΈνΈ<br>- κ°€μ… μΌμ‹     |
| λ‚μ λ©¤λ²„μ‹­ μ‚­μ       | DELETE          | /api/v1/memberships/{membershipId}     | x                         | X                                                           |
| λ©¤λ²„μ‹­ ν¬μΈνΈ μ λ¦½    | POST            | /api/v1/memberships/{membershipId}/add | - μ‚¬μ© κΈμ•΅               | X                                                           |

<br>

## κ°λ° κ³Όμ •

[π”— μ»¤λ°‹ λ΅κ·Έ](https://github.com/Jaster25/tdd-practice/commits/feature/membership/)

1. Member λ„λ©”μΈ - λ©¤λ²„μ‹­ μ „μ²΄ μ΅°ν
2. Member λ„λ©”μΈ - λ©¤λ²„μ‹­ λ“±λ΅
3. Membership λ„λ©”μΈ - ν¬μΈνΈ μ΅°ν
4. Member λ„λ©”μΈ, Membership λ„λ©”μΈ μ—°λ™ λ° μ½”λ“ λ¦¬ν©ν† λ§
5. Membership λ„λ©”μΈ - ν¬μΈνΈ μ¶”κ°€
6. λ©¤λ²„μ‹­ μ§€μ› νμ‚¬ Enum μ¶”κ°€ λ° μ½”λ“ λ¦¬ν©ν† λ§
7. Member λ„λ©”μΈ - λ©¤λ²„μ‹­ μ‚­μ 
   1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­ μ‚­μ 
8. JPA μ—°κ΄€κ΄€κ³„ μ½”λ“ μ¶”κ°€ λ° λ„λ©”μΈ μ½”λ“ μ†μ¤ μ΄λ™(test -> main)
9. Member λ„λ©”μΈ - ν¬μΈνΈ μ¶”κ°€ λ†“μΉ μμ™Έ μ¶”κ°€
   1. μ¶”κ°€ν•λ ¤λ” ν¬μΈνΈκ°€ μμμΈ κ²½μ°
10. Member μ„λΉ„μ¤ - λ©¤λ²„ μ΅°ν
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
11. Membership μ„λΉ„μ¤ - λ©¤λ²„μ‹­ λ©λ΅ μ΅°ν
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
12. Membership μ„λΉ„μ¤ - λ©¤λ²„μ‹­ μƒμ„Έ μ΅°ν
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
13. Membership μ„λΉ„μ¤ - κ¶ν• κ²€μ¦
    1. λ³ΈμΈ λ©¤λ²„μ‹­μ΄ μ•„λ‹ κ²½μ°
14. μ½”λ“ λ¦¬ν©ν† λ§
15. Membership μ„λΉ„μ¤ - λ©¤λ²„μ‹­ λ“±λ΅
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­ μ΄λ¦„
    3. μ΄λ―Έ μ΅΄μ¬ν•λ” λ©¤λ²„μ‹­ μ¤‘λ³µ λ“±λ΅
16. Membership μ„λΉ„μ¤ - λ©¤λ²„μ‹­ μ‚­μ 
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
    3. λ³ΈμΈ λ©¤λ²„μ‹­μ΄ μ•„λ‹ κ²½μ°
17. Membership μ„λΉ„μ¤ - λ©¤λ²„μ‹­ ν¬μΈνΈ μ λ¦½
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
    3. λ³ΈμΈ λ©¤λ²„μ‹­μ΄ μ•„λ‹ κ²½μ°
18. μ„λΉ„μ¤ μ½”λ“ μ†μ¤ μ΄λ™(test -> main)
19. Membership μ»¨νΈλ΅¤λ¬ - λ©¤λ²„μ‹­ λ“±λ΅
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ μ‚¬μ©μ μ‹λ³„ κ°’
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
20. Membership μ„λΉ„μ¤ - λ©¤λ²„μ‹­ λ“±λ΅ μ‹ ν¬μΈνΈ κΈ°μ…ν•λ„λ΅ λ¦¬ν©ν† λ§
21. Membership μ»¨νΈλ΅¤λ¬ - λ©¤λ²„μ‹­ μ „μ²΄ μ΅°ν
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
22. Membership μ»¨νΈλ΅¤λ¬ - λ©¤λ²„μ‹­ μƒμ„Έ μ΅°ν
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
23. Membership μ»¨νΈλ΅¤λ¬ - λ©¤λ²„μ‹ μ‚­μ 
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
24. Membership μ»¨νΈλ΅¤λ¬ - λ©¤λ²„μ‹­ ν¬μΈνΈ μ λ¦½
    1. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„
    2. μ΅΄μ¬ν•μ§€ μ•λ” λ©¤λ²„μ‹­
25. μ»¨νΈλ΅¤λ¬ μ½”λ“ μ†μ¤ μ΄λ™(test -> main)

<br>

## λλ‚€ μ 

- ν…μ¤νΈ μ½”λ“ μ‘μ„± λ‹¨κ³„μ—μ„ μ»΄νμΌ μ—λ¬ μƒνƒμ—μ„ λ§λ¬΄λ¦¬ν•λ” κ²ƒλ³΄λ‹¤ return null, μμ™Έ λ°μƒ λ“±μΌλ΅ μ²λ¦¬ν•μ—¬ μ»΄νμΌμ€ λλ„λ΅ κµ¬ν„ν•κ³  λ„μ–΄κ°€λ”κ² λ‚μ€ κ²ƒ κ°™λ‹¤.
- λ„λ©”μΈ κ³„μΈµλ¶€ν„° κµ¬ν„ν•΄λ΄¤λ”λ° μƒμ„ κ³„μΈµμ—μ„ λ³΄λ‹ ν•„μ”μ—†λ” μ½”λ“λ„ μƒκΈ°κ³  λ¦¬ν©ν† λ§λ„ λΉλ²ν–λ‹¤. λ‹¤μμ—” μ»¨νΈλ΅¤λ¬ κ³„μΈµλ¶€ν„° κµ¬ν„ν•΄λ³΄λ©° μ°¨μ΄μ μ„ μ •λ¦¬ν•΄λ΄μ•Όκ² λ‹¤.

<br>

## κ¶κΈν• μ 

- λ„λ©”μΈ κ³„μΈµλ¶€ν„° DDDλ¥Ό μ¶”κµ¬ν•λ©° κµ¬ν„μ„ ν–λ”λ°, JPAλ¥Ό λ„μ…ν•λ©° μ—°κ΄€κ΄€κ³„ κΈ°λ¥μ„ μ¶”κ°€ν•λ” κ³Όμ •μ—μ„ λ‚μ²ν•΄μ§„ μ½”λ“κ°€ λ§μ•„μ§€κ³  κ³ λ―Όλλ” λ¶€λ¶„μ΄ λ§μ•λ‹¤.
  - ex) Member λ„λ©”μΈμ λ©¤λ²„μ‹­ μ¶”κ°€ λ©”μ„λ“
    - λ©¤λ²„ λ„λ©”μΈμ—μ„ λ©¤λ²„μ‹­ μ—”ν‹°ν‹°λ¥Ό μƒμ„±ν•μ—¬ μ—°κ΄€κ΄€κ³„λ¥Ό λ§Ίμ–΄ μ£Όλ” κ²ƒμ΄ λ¶€μμ—°μ¤λ¬μ› λ³΄μ€λ‹¤.(μμ†ν™”ν•λ” κ³Όμ •)
    - μ„λΉ„μ¤ κ³„μΈµμΌλ΅ μ®κΈ°κΈ°λ΅ ν•¨
    - Member λ„λ©”μΈμ—μ„ λ©¤λ²„μ‹­ μ¶”κ°€ κΈ°λ¥μ΄ μ—†μ–΄μ§€λ‹¤ λ³΄λ‹ λ©¤λ²„μ‹­ μ΅°ν, μ‚­μ  ν…μ¤νΈκ°€ λ¶κ°€ν•μ—¬ κΈ°μ΅΄ ν…μ¤νΈκ°€ λ‚μ²ν•΄μ΅λ‹¤.
    - Member λ„λ©”μΈμ λ©¤λ²„μ‹­ λ“±λ΅ μ½”λ“
    ```java
    public Membership registerMembership(Membership newMembership) {
        memberships.add(newMembership);
        return newMembership;
    }
    ```
- λ°ν™ νƒ€μ…μ΄ voidμΈ λ©”μ„λ“λ¥Ό ν…μ¤νΈ ν•  λ•λ” ν–‰μ„μ— ν¬μ»¤μ¤λ¥Ό λ§μ¶λ‹¤.(λ‚΄λ¶€ λ©”μ„λ“κ°€ μ‹¤ν–‰ ν–λ”μ§€, μƒνƒκ°€ λ°”λ€μ—λ”μ§€, ...) ν•μ§€λ§ μ•„λμ™€ κ°™μ΄ μƒνƒμ λ³€ν™”κ°€ μ—†λ” λ‹¨μ κ²€μ¦ λ΅μ§μ΄ μ„±κ³µν•λ” ν…μ¤νΈ μΌ€μ΄μ¤λ” then μμ—­μ—μ„ λ¬΄μ—‡μ„ ν…μ¤νΈ ν•΄μ•Ό ν•λ”μ§€ μ°Ύμ•„λ΄μ•Όκ² λ‹¤.
    ```java
    public void verify(Member member, Membership membership) {
        if (!membership.getMember().equals(member)) {
            throw new IllegalArgumentException("κ¶ν•μ΄ μ—†μµλ‹λ‹¤.");
        }
    }
    ```

<br>

## π“ References

- https://mangkyu.tistory.com/182
